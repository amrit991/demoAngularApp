<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Well-being Times</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="https://storage.googleapis.com/doc_sourcefiles/ico/icons8-ios-photos-50.png">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <script data-ad-client="ca-pub-1415554554662955" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>
<body>
  <app-root></app-root>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  <p>Google Ad - First ad unit start</p>
  <!-- First ad unit -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1415554554662955"
     data-ad-slot="9681063332"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Google Ad - First ad unit finish</p>

<script>
  var hcpContext;
  var da = document.createElement('script');
  da.type = 'text/javascript';
  da.async = true;
  da.src = 'http://localhost:2000/render/getHJS';
  document.getElementsByTagName('head')[0].appendChild(da);
  function docereeLogIn(userObj) {
      if(!hcpContext){
          hcpContext = userObj;
          if(typeof setDocereeContext === 'function') {
              setDocereeContext(hcpContext);
          }
      }
  };
  // var userObj = {
  //   firstName: 'DANA',
  //   lastName: 'TRIPPI',
  //   specialization: 'Emergency Medicine'
  // };
  // docereeLogIn(userObj);
  function docereeLogOut() {
      document.cookie = '_docereeContext=; Max-Age=-99999999;'; 
  };

  function getHCPFromPublisherPage(callback) {
  let docereeScriptVersion = '0.1';
  let hcpData = {};
  hcpData['version'] = docereeScriptVersion;

  let cookieContent = getCookie('_docereeId');
  if (!!cookieContent) {
    cookieContent = JSON.parse(cookieContent)
    if (cookieContent.version == docereeScriptVersion) {
      hcpData['platformUid'] = cookieContent.platformUid;
    }
  }

  let encryptedContextSet = getCookie('_docereeContext');
  if (!!encryptedContextSet) {
    let contextSet = JSON.parse(decodeURIComponent(atob(encryptedContextSet)));
    hcpData['email'] = contextSet['email'];
    hcpData['firstName'] = contextSet['firstName'];
    hcpData['lastName'] = contextSet['lastName'];
    hcpData['specialization'] = contextSet['specialization'];
    hcpData['city'] = contextSet['city'];
    hcpData['zipCode'] = contextSet['zipCode'];
    hcpData['npi'] = contextSet['npi'];
    hcpData['hashedNPI'] = contextSet['hashedNPI'];
    hcpData['gender'] = contextSet['gender'];
    hcpData['mciRegistrationNumber'] = contextSet['mciRegistrationNumber'];
  } else {
    // INFO: this indicates that the user context is not set, i.e. HCP may have clicked logout. In this case, we have to remove the _docereeId cookie
    eraseCookie('_docereeContext');
  }

  let dmdEncryptedContext = getCookie('_docereeDmdContext');
  if (!!dmdEncryptedContext) {
    let dmdData = JSON.parse(decodeURIComponent(atob(dmdEncryptedContext)));
    hcpData['dmd'] = dmdData;
  } else {
    // INFO: this indicates that the dmd context is not set
    eraseCookie('_docereeDmdContext');
  }

  hcpData = JSON.stringify(hcpData);
  let encryptedHCP = btoa(encodeURIComponent(hcpData));
  callback(encryptedHCP);
};

function getCookie(name) {
  let nameEQ = name + "=";
  let ca = document.cookie.split(';');
  for (let i = 0; i < ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') c = c.substring(1, c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
  }
  return null;
};

function eraseCookie(name) {
  document.cookie = name + '=; Max-Age=-99999999;';
};
  </script>


</body>
</html>
